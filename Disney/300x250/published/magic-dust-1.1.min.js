//Magic Dust: Particles for HTML
//Created by ArtRayd and Aleksandr Efremov Â© 2014
(function(g){if(g&&"string"===typeof g){window[g]={start:function(){},stop:function(){}};var x=window.getComputedStyle,p=window.addEventListener;if(p&&x){var q=window.requestAnimationFrame,f=window.cancelAnimationFrame;["webkit","moz","ms"].forEach(function(b){RequestAnimationFrame=q||window[b+"RequestAnimationFrame"];f=f||window[b+"CancelAnimationFrame"]||window[b+"CancelRequestAnimationFrame"]});q&&f&&!/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||(q=function(b){return window.setTimeout(function(){b()},
16)},f=window.clearTimeout);var h={},k={},r={},m,n,w,y,z,B=function(b){m=Math.random()*b.j+b.t;n=Math.random()*b.n;w=Math.random()*b.u+b.h;y=Math.abs(m-n)/w;z=Math.round(Math.random()*b.r+b.l)},A=function(b,a,d){a.a+=a.c;for(a.y-=a.speed;;)if(a.a>b.f)a.a=b.k-a.a,a.c=-Math.abs(a.c);else if(a.a==b.f)a.c=-Math.abs(a.c);else if(0>a.a)a.a=-a.a,a.c=Math.abs(a.c);else if(0==a.a)a.c=Math.abs(a.c);else break;a.y<a.o&&(B(b),b.d[d]={x:Math.random()*b.s+b.f,y:Math.max(m,n),a:0,speed:w,c:b.k*z/y,o:Math.min(m,
n)})},C=function(b){var a=h[b];r[b]=q(function(){C(b)},a.e);a.b.clearRect(0,0,a.e.width,a.e.height);a.b.fillStyle=a.i;if(a.i===a.m)for(var d=0;d<a.g;d++){var e=a.d[d];a.b.beginPath();a.b.arc(e.x,e.y,e.a,0,2*Math.PI,!1);a.b.fill();A(a,e,d)}else for(d=0;d<a.g;d++){e=a.d[d];a.b.beginPath();a.b.arc(e.x,e.y,e.a,0,2*Math.PI,!1);var f=a.b.createRadialGradient(e.x,e.y,0,e.x,e.y,e.a);f.addColorStop(0,a.i);f.addColorStop(1,a.m);a.b.fillStyle=f;a.b.fill();A(a,e,d)}},v=function(b){var a=b.canvas,d=document.getElementById(a);
if(d){h[a]&&(clearTimeout(k[a]),h[a].b.clearRect(0,0,d.width,d.height));f(r[a]);var e=b.canvasWidth,g=b.canvasHeight;e&&(d.style.width=e);g&&(d.style.height=g);k[a]=setTimeout(function(){var c=parseInt(x(d,null).getPropertyValue("width")),e=parseInt(x(d,null).getPropertyValue("height")),f=Math.max(c-2*Math.abs(b.maxRadius||6),0);d.width=c;d.height=e;var g=b.minSpeed,t=b.maxSpeed,u=b.minBlink,k=b.maxBlink,l=b.startColor,p=b.stopColor,v=Math.abs(g||t||1),g=Math.abs(t||g||1),t=Math.abs(u||k||1),u=Math.abs(k||
u||1);if(d.getContext){h[a]={e:d,b:d.getContext("2d"),d:[],g:Math.abs(Math.round(b.count)||30),f:(c-f)/2,h:Math.min(v,g)/20,q:Math.max(v,g)/20,l:Math.round(Math.min(t,u)),p:Math.round(Math.max(t,u)),n:Math.min(Math.abs(b.collectorHeight||1),e),j:Math.min(Math.abs(b.emitterHeight||1),e),s:f,i:l||p||"rgba(255, 255, 255, 1)",m:p||l||"rgba(255, 255, 255, 0)"};c=h[a];e=c.g/(e/c.h);c.k=2*c.f;c.u=c.q-c.h;c.r=c.p-c.l;for(c.t=c.e.height-c.j;c.d.length<c.g;)for(Math.random()<e&&(B(c),c.d.push({x:Math.random()*
f+c.f,y:Math.max(m,n),a:0,speed:w,c:c.k*z/y,o:Math.min(m,n)})),l=0;l<c.d.length;l++)A(c,c.d[l],l);r[a]=q(function(){C(a)},c.e)}},200)}};p("resize",function(){for(var b in h){var a=h[b];v({canvas:b,count:a.g,emitterHeight:a.j,collectorHeight:a.n,maxRadius:a.f,minSpeed:20*a.h,maxSpeed:20*a.q,minBlink:a.l,maxBlink:a.p,startColor:a.i,stopColor:a.m})}},!1);window[g]={start:v,stop:function(b){var a=h[b];a&&(clearTimeout(k[b]),f(r[b]),a.b.clearRect(0,0,a.e.width,a.e.height),delete h[b],delete k[b],delete r[b])}}}}})("magicDust");
