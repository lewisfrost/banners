function rr(t,i,s){var h=Math.random()*(i-t)+t;return s?Math.floor(h):h}function Steam(t,i,s,h,a,e,r){this.canvas=document.createElement("canvas"),this.w=this.canvas.width=h,this.h=this.canvas.height=a,this.c=this.canvas.getContext("2d"),this.count=0,this.countDelay=5,this.img=new Image,this.img.src=s,this.position=e,this.parent=t,this.parent.appendChild(this.canvas),this.updateCounter=0,this.updateMax=2,this.updateMaxFac=this.updateMax,this.amount=r,this.particles=[],this.canvasSupported=function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))}}Steam.prototype.Particle=function(t,i,s){this.startX=this.x=t,this.startY=this.y=i,this.velY=rr(.3,.6)*s.updateMaxFac,this.velX=rr(.5,1)*s.updateMaxFac,this.velR=rr(0,1)/100*s.updateMaxFac,Math.random()>.5&&(this.velX=-this.velX),Math.random()>.5&&(this.velY=-this.velY),Math.random()>.5&&(this.velR=-this.velR),this.size=2*rr(2,4),this.alpha=0,this.maxAlpha=rr(.1,.2),this.rotation=rr(0,360),this.maxSize=2*rr(8,12),this.alphaIncr=.005*s.updateMaxFac,this.sizeIncr=.01*s.updateMaxFac,this.update=function(t){this.y+=this.velY,this.x+=this.velX,this.rotation+=this.velR,this.alpha<this.maxAlpha&&(this.alpha+=this.alphaIncr);var i=t.c;i.globalAlpha=this.alpha,i.save(),i.translate(this.x,this.y),i.scale(this.size,this.size),i.rotate(this.rotation),i.drawImage(t.img,0,0,t.img.width,t.img.height,-t.img.width/2,-t.img.height/2,t.img.width,t.img.height),i.restore(),this.size<this.maxSize&&(this.size+=this.sizeIncr),this.x-18*this.size>t.w?this.reset=!0:this.x+18*this.size<0&&(this.reset=!0),this.y-18*this.size>t.h?this.reset=!0:this.y+18*this.size<0&&(this.reset=!0),this.reset&&(this.x=this.startX,this.y=this.startY,this.reset=!1,this.size=rr(2,4),this.alpha=0)}},Steam.prototype.draw=function(){if(this.amount||(this.amount=20),this.particles.length<this.amount&&this.count>this.countDelay){var t=rr(-150,0)+this.position.y,i=new this.Particle(this.position.x,t,this);this.particles.push(i),this.count=-1}if(this.count++,this.updateCounter==this.updateMax){this.c.clearRect(0,0,this.canvas.width,this.canvas.height);for(var s=this.particles.length,h=0;s>h;h++)this.particles[h].update(this);this.updateCounter=-1}this.updateCounter++},Steam.prototype.start=function(t){if(this.canvasSupported()&&(TweenLite.ticker.fps(60),TweenLite.ticker.addEventListener("tick",this.draw,this),t))for(var i=0;100>i;i++)this.draw()};