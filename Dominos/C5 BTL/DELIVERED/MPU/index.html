<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>300x250 MPU</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="main.css"/>
    <script src="https://s0.2mdn.net/ads/studio/Enabler.js"></script>

    
<!--[if lt IE 11]>
<p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]-->

</head>
<body>

<!----------============--------------MAIN DIVS --------==============------------->    
    
<div id="bg-exit"></div>
<div id="banner">
    <div class="background"></div>
    <div class="logo"></div>
    <div class="line-1"></div>
    <div class="two"></div>
    <div class="line-2"></div>
    <div class="line-3"></div>
    <div class="price"></div>
    <div class="ribbon"></div>
    <div class="tastiest"></div>
    <div class="doubly"></div>
    <div class="button"></div>
    <div class="terms">*Not valid with other offers. Participating stores only. Valid until 15/11/15. T&Cs apply: see Boring Legal Stuff at dominos.ie
    </div>
    
    
<!-----========================-------MAIN DIVS -----=========================----->      


<body>

<script type="text/javascript">

    function bgExitHandler(e) {
        Enabler.exitOverride('Background Exit', 'http://www.dominos.ie');
    }

    document.getElementById('bg-exit').addEventListener('click', bgExitHandler, false);

    // ****

    var irisBanner = ( function(){

        var els = {
            bannerEl : document.getElementById("banner")
        };

        var props = {

        };

        var actions = {
            SHOW : "SHOW"
        };

        init();

        function init(){
            //console.log("/index/ -init ");
            els.buttonEl = setElement( ".button" );
            els.line1El = setElement( ".line-1" );
            els.twoEl = setElement( ".two" );
            els.line2El = setElement( ".line-2" );
            els.doublyEl = setElement( ".doubly" );
            els.line3El = setElement( ".line-3" );
            els.termsEl = setElement( ".terms" );
            els.ribbonEl = setElement( ".ribbon" );
            els.tastiestEl = setElement( ".tastiest" );
            els.priceEl = setElement( ".price" );

            // *******
            sequence();
        }

        /**
         *
         */
        function sequence(){

             var tm = 1;
            tm += 0;
            timer( tm, actions.SHOW, { el : els.doublyEl } );       

            // week banner, stars
            tm += 1.8;
            timer( tm + 0.5, actions.SHOW, { el : els.line1El } );
            timer( tm + 0.5, actions.SHOW, { el : els.twoEl } );
            
            tm += 3;
            timer( tm + 0.5, actions.SHOW, { el : els.line2El } );
            timer( tm + 0.5, actions.SHOW, { el : els.priceEl } );
            
            tm += 3;
            timer( tm + 0.5, actions.SHOW, { el : els.line3El } );
            timer( tm + 0.5, actions.SHOW, { el : els.termsEl } );
            
            tm += 5;
            timer( tm + 0.5, actions.SHOW, { el : els.ribbonEl } );
            timer( tm + 1.0, actions.SHOW, { el : els.tastiestEl } );
            timer( tm + 1.5, actions.SHOW, { el : els.buttonEl } );
            

            
        }


        function timer( _delay, _action, _props ){

            var d = _delay * 1000;

            var to = window.setTimeout( function(){

                actionRunner( _action, _props || null );
                window.clearTimeout( to );
            }, d );
        }


        function setElement( _selector ){
            return els.bannerEl.querySelectorAll( _selector )[ 0 ];
        }


        function actionRunner( _action, _props ){

            console.log("/index/ -actionRunner ", _action, _props );

            switch( _action ){

                case actions.SHOW:

                    addClass( _props.el, "show", true );

                    break;
            }
        }


        /**
         *
         * @param _el
         * @param _class
         * @param _f
         */
        function addClass( _el, _class, _f ){

            console.log("/index/ -addClass ", _el, _class );

            ( _f ) ? _el.classList.add( _class ) : _el.classList.remove( _class );

        }

        function prefix(){

        }


    })();


</script>
</html>
